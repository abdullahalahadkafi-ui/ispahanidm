<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <title>আমার প্রোফাইল | ইস্পাহানি দাখিল মাদ্রাসা</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #006a4e; --bg: #f0f2f5; }
        body { font-family: 'Hind Siliguri', sans-serif; background: var(--bg); padding-top: 50px; text-align: center; }
        .profile-card { background: white; max-width: 500px; margin: auto; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .user-img { width: 100px; height: 100px; border-radius: 50%; border: 3px solid var(--primary); margin-bottom: 15px; }
        .form-group { text-align: left; margin-bottom: 15px; }
        label { display: block; font-weight: bold; font-size: 13px; color: #555; }
        input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px; outline: none; }
        .btn-save { background: var(--primary); color: white; border: none; padding: 15px; width: 100%; border-radius: 10px; font-weight: bold; cursor: pointer; }










        /* --- CINEMATIC AI BOT ICON STYLE --- */
.ai-launcher {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 65px;
    height: 65px;
    z-index: 9999;
    text-decoration: none;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.ai-icon-inner {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #000 0%, #1a1a2e 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid rgba(0, 210, 255, 0.5);
    color: #00d2ff; /* Initial AI Blue */
    font-size: 28px;
    box-shadow: 0 0 20px rgba(0, 210, 255, 0.3);
    z-index: 2;
    animation: aiColorShift 5s infinite linear; /* কালার চেঞ্জ এনিমেশন */
}

/* আইকনকে দামী লুক দেওয়ার জন্য RGB কালার শিফট */
@keyframes aiColorShift {
    0% { color: #00d2ff; border-color: #00d2ff; box-shadow: 0 0 20px rgba(0, 210, 255, 0.6); }
    33% { color: #39ff14; border-color: #39ff14; box-shadow: 0 0 20px rgba(57, 255, 20, 0.6); }
    66% { color: #7000ff; border-color: #7000ff; box-shadow: 0 0 20px rgba(112, 0, 255, 0.6); }
    100% { color: #00d2ff; border-color: #00d2ff; box-shadow: 0 0 20px rgba(0, 210, 255, 0.6); }
}

/* রোবট আইকনের থরথর করে কাঁপার এনিমেশন (Neural Pulse) */
.ai-launcher i {
    animation: neuralPulse 2s infinite ease-in-out;
}
@keyframes neuralPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.15); opacity: 0.8; }
}

/* আইকনের চারপাশে ছড়ানো নিয়ন রিং (Cinematic Aura) */
.ai-pulse-ring {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: inherit;
    border: 2px solid var(--ai-blue);
    animation: ringGlow 2s infinite;
    z-index: 1;
}

@keyframes ringGlow {
    0% { transform: scale(1); opacity: 0.8; box-shadow: 0 0 10px rgba(0, 210, 255, 0.5); }
    100% { transform: scale(1.8); opacity: 0; box-shadow: 0 0 40px rgba(0, 210, 255, 0); }
}

/* হোভার ইফেক্ট */
.ai-launcher:hover {
    transform: scale(1.2) rotate(15deg);
}

/* মোবাইল রেসপন্সিভ - মোবাইলে একটু ছোট হবে */
@media (max-width: 600px) {
    .ai-launcher {
        bottom: 20px;
        right: 20px;
        width: 55px;
        height: 55px;
    }
    .ai-icon-inner { font-size: 24px; }
}
    </style>
</head>
<body>
    <div class="form-group">
    <label>প্রোফাইল ছবি পরিবর্তন করুন</label>
    <input type="file" id="photoFile" accept="image/*" onchange="uploadPhoto()">
    <small id="upload-status" style="color: blue;"></small>
</div>
    

    <div class="profile-card">
        <img id="user-pic" class="user-img" src="https://via.placeholder.com/100">
        <h2 id="user-name-title">ইউজারের নাম</h2>
        <p id="user-email" style="color:#888; margin-bottom: 20px;"></p>
        <hr><br>

        <div class="form-group"><label>আপনার পূর্ণ নাম</label><input type="text" id="p-name"></div>
        <div class="form-group"><label>শ্রেণী</label><input type="text" id="p-class" placeholder="যেমন: দাখিল ১০ম"></div>
        <div class="form-group"><label>রোল নম্বর</label><input type="text" id="p-roll"></div>
        <div class="form-group"><label>মোবাইল নম্বর</label><input type="tel" id="p-phone" placeholder="017XXXXXXXX"></div>
        <div class="form-group"><label>ঠিকানা</label><input type="text" id="p-address"></div>

        <button class="btn-save" onclick="updateProfile()">তথ্য আপডেট করুন</button>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = { /* তোমার সেই কনফিগ কোড এখানে বসাও */ };
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let currentUID = "";

        // ১. লগইন করা ইউজারের ডাটা লোড করা
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                currentUID = user.uid;
                document.getElementById('user-pic').src = user.photoURL;
                document.getElementById('user-email').innerText = user.email;
                document.getElementById('user-name-title').innerText = user.displayName;

                // যদি আগে থেকে তথ্য থাকে তা বক্সে দেখানো
                const docSnap = await getDoc(doc(db, "users", user.uid));
                if (docSnap.exists()) {
                    const data = docSnap.data();
                    document.getElementById('p-name').value = data.name || user.displayName;
                    document.getElementById('p-class').value = data.class || "";
                    document.getElementById('p-roll').value = data.roll || "";
                    document.getElementById('p-phone').value = data.phone || "";
                    document.getElementById('p-address').value = data.address || "";
                }
            } else {
                window.location.href = "login.html";
            }
        });

        // ২. ডাটাবেজে তথ্য সেভ করা
        window.uploadPhoto = function() {
    const file = document.getElementById('photoFile').files[0];
    const status = document.getElementById('upload-status');
    status.innerText = "ছবি প্রসেস হচ্ছে...";

    const reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onload = async function () {
        const base64Image = reader.result; // এটি ছবির ডাটা
        // এই ডাটাটি আমরা ইউজারের 'photo' ফিল্ডে সেভ করবো
        status.innerText = "ছবি সফলভাবে নির্বাচিত হয়েছে। তথ্য সেভ করুন বাটনে চাপুন।";
        localStorage.setItem('tempPhoto', base64Image); 
    };
};
    </script>


<!-- Floating AI Bot Launcher -->
<a href="ai-chat.html" class="ai-launcher animate__animated animate__fadeInUp" title="IDM AI এর সাথে কথা বলুন">
    <div class="ai-icon-inner">
        <i class="fas fa-robot"></i>
    </div>
    <!-- আইকনের চারপাশে নিয়ন রিং -->
    <div class="ai-pulse-ring"></div>
</a>
</body>
</html>